# multicamera-editing

自動化剪輯多鏡頭所拍攝的影片，並提供每位表演者客製化屬於他的影片剪輯。

### Usage
#### Build the environment.
```
$ docker build -t multicamera-editing .
$ docker run -it --mount type=bind,source="$(pwd)",target=/code multicamera-editing /bin/bash
```
#### main.py
Run multicamera and style editing.
```
usage: python3 main.py [-h] --video_dir VIDEO_DIR
                       [--main_cam MAIN_CAM]
                       --tracking_dir TRACKING_DIR
                       [--min_frame MIN_FRAME]
                       [--auto_frame]
                       --shot_file SHOT_FILE
                       --output_file OUTPUT_FILE

arguments:
  -h, --help
  --video_dir     VIDEO_DIR       Path to the directory with video source.
  --main_cam      MAIN_CAM        Filename of the video source from main camera.
  --tracking_dir  TRACKING_DIR    Path to the directory with target's tracking result.
  --min_frame     MIN_FRAME       Minimum duration of a segment. (default=80)
  --auto_frame                    If set, calculate min_frame by detecting the bpm of the video source.
  --shot_file     SHOT_FILE       Path to the shot type sequence generated by style editing model or markov model.
  --output_file   OUTPUT_FILE     Path to the result of the multicamera and style editing.
```
#### Example
1. 追蹤目標為開場左側人物、最高切換頻率使用預設值、運鏡序列使用 shot/kpop_22_toshot.txt、輸出檔案為 kpop_left.mp4
- Run `python3 main.py --video_dir AIST_v1/video --tracking_dir AIST_v1/tr_left --shot_file shot/kpop_22_toshot.txt --output_file kpop_left.mp4`
2. 追蹤目標為開場中間人物、最高切換頻率自訂 (90 frame)、運鏡序列使用 shot/singer_4_toshot.txt、輸出檔案為 singer_mid.mp4
- Run `python3 main.py --video_dir AIST_v1/video --tracking_dir AIST_v1/tr_mid --min_frame 90 --shot_file shot/singer_4_toshot.txt --output_file singer_mid.mp4`
3. 追蹤目標為開場右側人物、最高切換頻率使用預設值、運鏡序列使用 shot/kpop_22_toshot.txt、輸出檔案為 kpop_right.mp4
- Run `python3 main.py --video_dir AIST_v1/video --tracking_dir AIST_v1/tr_right --shot_file shot/kpop_22_toshot.txt --output_file kpop_right.mp4`

### Demo
#### Video source
[![](http://i3.ytimg.com/vi/BkWlWx_QviQ/hqdefault.jpg)](https://youtu.be/BkWlWx_QviQ "Click to play on Youtube.com")
#### Result
[![](http://i3.ytimg.com/vi/7R7eGVQ1Zhk/hqdefault.jpg)](https://youtu.be/7R7eGVQ1Zhk "Click to play on Youtube.com")
